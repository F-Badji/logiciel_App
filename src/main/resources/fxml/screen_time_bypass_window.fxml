<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.logicielapp.controller.ScreenTimeBypassController">

    <!-- En-tête -->
    <top>
        <VBox styleClass="header-section">
            <HBox alignment="CENTER" styleClass="title-bar">
                <Label styleClass="window-title" text="⏰ Suppression Code Temps d'Écran">
                    <font>
                        <Font name="System Bold" size="18.0" />
                    </font>
                </Label>
            </HBox>
            
            <HBox alignment="CENTER" spacing="20.0" styleClass="info-bar">
                <Label text="Supprime définitivement le code Temps d'écran sans perdre de données" 
                       styleClass="info-text" />
            </HBox>
        </VBox>
    </top>

    <!-- Contenu principal -->
    <center>
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
            <content>
                <VBox spacing="20.0" styleClass="main-content">
                    <padding>
                        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                    </padding>

            <!-- Section détection d'appareil -->
            <VBox spacing="15.0" styleClass="section-box-dark">
                <Label text="📱 Détection d'Appareil iOS" styleClass="section-title-dark">
                    <font>
                        <Font name="System Bold" size="14.0" />
                    </font>
                </Label>
                
                <HBox spacing="15.0" alignment="CENTER_LEFT">
                    <Button fx:id="detectBtn" text="🔍 Détecter Appareils iOS" 
                            onAction="#handleDetectDevices" styleClass="action-button-dark" />
                    <Button fx:id="refreshBtn" text="🔄 Actualiser" 
                            onAction="#handleRefreshDevices" styleClass="action-button-dark" />
                </HBox>
                
                <VBox spacing="10.0">
                    <Label text="Appareil détecté:" styleClass="field-label-dark" />
                    <ComboBox fx:id="deviceComboBox" promptText="Aucun appareil détecté" 
                              prefWidth="400.0" styleClass="device-combo-dark" />
                </VBox>
                
                <GridPane hgap="15.0" vgap="10.0">
                    <columnConstraints>
                        <ColumnConstraints minWidth="120.0" />
                        <ColumnConstraints minWidth="200.0" />
                    </columnConstraints>
                    
                    <Label text="Modèle:" styleClass="info-label-dark" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                    <Label fx:id="modelLabel" text="Non détecté" styleClass="info-value-dark" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                    
                    <Label text="Version iOS:" styleClass="info-label-dark" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                    <Label fx:id="iosVersionLabel" text="Inconnue" styleClass="info-value-dark" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                    
                    <Label text="État Temps d'écran:" styleClass="info-label-dark" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                    <Label fx:id="screenTimeStatusLabel" text="Non vérifié" styleClass="info-value-dark" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                </GridPane>
            </VBox>

            <!-- Section méthode de suppression -->
            <VBox spacing="15.0" styleClass="section-box-dark">
                <Label text="🗑️ Méthode de Suppression" styleClass="section-title-dark">
                    <font>
                        <Font name="System Bold" size="14.0" />
                    </font>
                </Label>
                
                <VBox spacing="10.0">
                    <RadioButton fx:id="safeRemovalRadio" text="🛡️ Suppression Sécurisée (Recommandée)" 
                                 selected="true" styleClass="radio-button-dark">
                        <toggleGroup>
                            <ToggleGroup fx:id="removalMethodGroup" />
                        </toggleGroup>
                    </RadioButton>
                    
                    <RadioButton fx:id="forceRemovalRadio" text="⚡ Suppression Forcée (Avancé)" 
                                 toggleGroup="$removalMethodGroup" styleClass="radio-button-dark" />
                </VBox>
                
                <VBox spacing="10.0">
                    <Label text="ℹ️ La suppression sécurisée préserve toutes vos données personnelles" 
                           styleClass="info-text-dark" wrapText="true" />
                    <CheckBox fx:id="createBackupCheckBox" text="Créer une sauvegarde avant suppression" 
                              selected="true" styleClass="checkbox-dark" />
                    <CheckBox fx:id="verifyRemovalCheckBox" text="Vérifier la suppression complète" 
                              selected="true" styleClass="checkbox-dark" />
                </VBox>
            </VBox>

            <!-- Section avertissements -->
            <VBox spacing="15.0" styleClass="section-box-dark">
                <Label text="⚠️ Avertissements Importants" styleClass="section-title-dark">
                    <font>
                        <Font name="System Bold" size="14.0" />
                    </font>
                </Label>
                
                <VBox spacing="8.0">
                    <Label text="• Cette opération supprime définitivement le code Temps d'écran" 
                           styleClass="warning-text-dark" wrapText="true" />
                    <Label text="• Toutes les restrictions Temps d'écran seront désactivées" 
                           styleClass="warning-text-dark" wrapText="true" />
                    <Label text="• L'opération est irréversible une fois terminée" 
                           styleClass="warning-text-dark" wrapText="true" />
                    <Label text="• Vos données personnelles et applications restent intactes" 
                           styleClass="success-text-dark" wrapText="true" />
                </VBox>
            </VBox>

            <!-- Section progression -->
            <VBox spacing="15.0" styleClass="section-box-dark">
                <Label text="📊 Progression de la Suppression" styleClass="section-title-dark">
                    <font>
                        <Font name="System Bold" size="14.0" />
                    </font>
                </Label>
                
                <VBox spacing="10.0">
                    <HBox spacing="10.0" alignment="CENTER_LEFT">
                        <Label text="Statut:" styleClass="field-label-dark" />
                        <Label fx:id="statusLabel" text="Prêt" styleClass="status-ready-dark" />
                    </HBox>
                    
                    <ProgressBar fx:id="progressBar" prefWidth="500.0" progress="0" 
                                 styleClass="bypass-progress-dark" />
                    
                    <Label fx:id="progressLabel" text="En attente..." styleClass="progress-text-dark" />
                </VBox>
            </VBox>

            <!-- Section logs -->
            <VBox spacing="15.0" styleClass="section-box-dark">
                <HBox spacing="10.0" alignment="CENTER_LEFT">
                    <Label text="📝 Journal d'Activité" styleClass="section-title-dark">
                        <font>
                            <Font name="System Bold" size="14.0" />
                        </font>
                    </Label>
                    <Button fx:id="clearLogsBtn" text="🗑️ Effacer" onAction="#handleClearLogs" 
                            styleClass="action-button-dark" />
                </HBox>
                
                <TextArea fx:id="logArea" prefHeight="200.0" editable="false" 
                          wrapText="true" styleClass="text-area-dark" 
                          promptText="Les détails du processus de suppression s'afficheront ici..." />
            </VBox>
                </VBox>
            </content>
        </ScrollPane>
    </center>

    <!-- Boutons d'action -->
    <bottom>
        <HBox spacing="15.0" alignment="CENTER" styleClass="button-bar">
            <padding>
                <Insets bottom="20.0" left="20.0" right="20.0" top="15.0" />
            </padding>
            
            <Button fx:id="startRemovalBtn" text="🗑️ Supprimer Code Temps d'Écran" 
                    onAction="#handleStartRemoval" styleClass="start-button" 
                    disable="true" prefWidth="220.0" />
            
            <Button fx:id="stopBtn" text="⏹️ Arrêter" onAction="#handleStopRemoval" 
                    styleClass="stop-button" disable="true" prefWidth="120.0" />
            
            <Button fx:id="helpBtn" text="❓ Aide" onAction="#handleHelp" 
                    styleClass="help-button" prefWidth="100.0" />
            
            <Button fx:id="closeBtn" text="❌ Fermer" onAction="#handleClose" 
                    styleClass="close-button" prefWidth="100.0" />
        </HBox>
    </bottom>

</BorderPane>
